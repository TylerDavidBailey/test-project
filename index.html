<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WASM Workout Table</title>
    <style>
        table {
            border-collapse: collapse;
            margin-top: 1em;
        }

        th,
        td {
            border: 1px solid #ccc;
            padding: 8px 12px;
        }
    </style>
</head>

<body>
    <h1>Workout Plan</h1>
    <button id="btn">Generate Plan</button>
    <table id="workoutTable">
        <thead>
            <tr>
                <th>Exercise</th>
                <th>Reps</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="wasm_exec.js"></script>
    <script>
        const go = new Go();

        WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then(result => {
            go.run(result.instance);
            document.getElementById("btn").onclick = () => {
                const data = generateWorkout(); // now this works
                const tbody = document.querySelector("#workoutTable tbody");
                tbody.innerHTML = ""; // clear old rows

                for (let i = 0; i < data.length; i++) {
                    const [exercise, reps] = data[i].split(":");
                    const row = document.createElement("tr");
                    row.innerHTML = `<td>${exercise}</td><td>${reps}</td>`;
                    tbody.appendChild(row);
                }
            };
        });
    </script>
</body>

</html>