<script>
    // Ensure Go instance is available
    const go = new Go();

    // Load the WASM file and run the Go code
    WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject)
        .then((result) => {
            go.run(result.instance);

            // Add event listener after WASM is loaded
            document.getElementById("encodeButton").addEventListener("click", function () {
                const inputText = document.getElementById("inputText").value;
                if (inputText) {
                    // Call Go function (wasmEncodeBase64) from JavaScript
                    const encodedText = wasmEncodeBase64(inputText);
                    document.getElementById("encodedText").innerText = "Base64 Encoded: " + encodedText;
                }
            });
        })
        .catch((err) => {
            console.error("Failed to load WASM:", err);
        });
</script>